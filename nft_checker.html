<!DOCTYPE html>
<html>
<head>
    <title>Verificador de NFT</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.3/dist/web3.min.js"></script>
</head>
<body>
    <button id="connectWalletButton">Conectar Carteira</button>
    <input type="text" id="contractAddress" placeholder="EndereÃ§o do Contrato">
    <input type="text" id="tokenId" placeholder="ID do Token">
    <button id="checkNFTButton">Verificar NFT</button>
    <script src="checkNFT.js"></script>
    <script>
        const connectWalletButton = document.getElementById('connectWalletButton');
        const checkNFTButton = document.getElementById('checkNFTButton');
        let web3;
        let userAddress;

        window.addEventListener('load', async () => {
            // Modern dapp browsers...
            if (window.ethereum) {
                window.web3 = new Web3(ethereum);
                try {
                    // Request account access if needed
                    await ethereum.request({ method: 'eth_requestAccounts' });
                    // Acccounts now exposed
                    web3.eth.sendTransaction({/* ... */});
                } catch (error) {
                    // User denied account access...
                }
            }
            // Legacy dapp browsers...
            else if (window.web3) {
                window.web3 = new Web3(web3.currentProvider);
                // Acccounts always exposed
                web3.eth.sendTransaction({/* ... */});
            }
            // Non-dapp browsers...
            else {
                console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');
            }
        });

        connectWalletButton.addEventListener('click', async () => {
            try {
                // Request account access
                const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
                userAddress = accounts[0];
            } catch (error) {
                console.error("Erro ao conectar a carteira: ", error);
            }
        });

        checkNFTButton.addEventListener('click', async () => {
            const contractAddress = document.getElementById('contractAddress').value;
            const tokenId = document.getElementById('tokenId').value;
            // const result = await checkNFT(window.web3, contractAddress, userAddress, tokenId); 
            const result = await contract.methods.checkNFTButton(contractAddress, userAddress, tokenId).call();
            console.log(result);
        });
    </script>
</body>
</html>
